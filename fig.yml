nginx:
  image: shepmaster/nginx-template-image
  ports:
    - 8888:80
  volumes:
    - components/nginx/conf:/etc/nginx/sites-templates:ro
    - /tmp/nginx-logs:/var/log/nginx
    - components/nginx/src/:/static
  working_dir: /static
  links:
    - newsentenceendpointservice

newsentenceendpointservice:
  build: components/new_sentence_endpoint_service
  ports:
    - 3000:3000
  volumes:
    - components/new_sentence_endpoint_service/src:/src
  working_dir: /src
  command: python new_sentence_endpoint.py
  links:
    - rabbitmq

loggingservice:
  build: components/logging_service
  volumes:
    - components/logging_service/src:/src
  working_dir: /src
  command: python logging_endpoint.py
  links:
    - rabbitmq

translationservice:
  build: components/translation_service
  volumes:
    - components/translation_service/src:/src
  working_dir: /src
  command: python translation_endpoint.py
  environment:
    - TRANSLATE_API_CLIENT_ID=${TRANSLATE_API_CLIENT_ID}
    - TRANSLATE_API_SECRET=${TRANSLATE_API_SECRET}
  links:
    - rabbitmq

rabbitmq:
  image: dockerfile/rabbitmq
  ports:
    - 5672:5672
